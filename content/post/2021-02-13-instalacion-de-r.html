---
title: Instalación de R (actualizado)
author: Rubén Fernández Casal
date: '2024-11-09'
slug: instalacion-de-r
categories:
  - R
tags:
  - Configuración
  - Apuntes
summary: "Pasos para la instalación de R en Windows, Ubuntu/Devian y Mac OS X."
output:
  blogdown::html_page:
    toc: true
---


<div id="TOC">
<ul>
<li><a href="#windows" id="toc-windows">Instalación de R en Windows</a>
<ul>
<li><a href="#asistente-de-instalación" id="toc-asistente-de-instalación">Asistente de instalación</a></li>
<li><a href="#instalación-de-paquetes" id="toc-instalación-de-paquetes">Instalación de paquetes</a></li>
<li><a href="#ide" id="toc-ide">Instalación (opcional) de un entorno de desarrollo o un editor de comandos</a></li>
<li><a href="#configuración-avanzada-opcional" id="toc-configuración-avanzada-opcional">Configuración avanzada (opcional)</a>
<ul>
<li><a href="#library" id="toc-library">Cambiar los permisos de la carpeta <em>library</em></a></li>
<li><a href="#rtools" id="toc-rtools">Instalación de herramientas (incluyendo Rtools) y configuración de la ruta de búsqueda</a></li>
</ul></li>
</ul></li>
<li><a href="#ubuntu" id="toc-ubuntu">Instalación de R en Ubuntu/Devian</a>
<ul>
<li><a href="#instalación-de-r-desde-cran" id="toc-instalación-de-r-desde-cran">Instalación de R desde CRAN</a></li>
<li><a href="#instalación-de-devtools-y-demás-paquetes" id="toc-instalación-de-devtools-y-demás-paquetes">Instalación de devtools y demás paquetes</a></li>
<li><a href="#ayuda-html" id="toc-ayuda-html">Ayuda html</a></li>
<li><a href="#actualizar-r" id="toc-actualizar-r">Actualizar R</a></li>
<li><a href="#instalar-r-studio" id="toc-instalar-r-studio">Instalar R-Studio</a></li>
</ul></li>
<li><a href="#macosx" id="toc-macosx">Instalación en Mac OS X</a></li>
</ul>
</div>

<p>[Actualizado a R 4.4.2]</p>
<p>En la web del proyecto R (<a href="http://www.r-project.org">www.r-project.org</a>) está disponible mucha información sobre este entorno estadístico.</p>
<table>
<tbody>
<tr class="odd">
<td align="center"><a href="https://r-project.org">R-project</a></td>
<td align="center"><a href="https://cran.r-project.org">CRAN</a></td>
</tr>
<tr class="even">
<td align="center"><img src="/img/rproject.png" /></td>
<td align="center"><img src="/img/cran.png" style="width:88.0%" /></td>
</tr>
</tbody>
</table>
<p>Las descargas se realizan a través de la web del CRAN (The Comprehensive R Archive Network), con múltiples <a href="https://cran.r-project.org/mirrors.html">mirrors</a>:</p>
<ul>
<li><em>Oficina de software libre (CIXUG)</em>, A Coruña: <a href="http://ftp.cixug.es/CRAN/">ftp.cixug.es/CRAN</a>.</li>
<li><em>Spanish National Research Network, Madrid</em> (RedIRIS): <a href="http://cran.es.r-project.org/">cran.es.r-project.org</a>.</li>
</ul>
<div id="windows" class="section level1">
<h1>Instalación de R en Windows</h1>
<p>Seleccionando <a href="http://ftp.cixug.es/CRAN/bin/windows/">Download R for Windows</a> y posteriormente <a href="http://ftp.cixug.es/CRAN/bin/windows/base/">base</a> accedemos al enlace con el instalador de R para Windows.</p>
<p><img src="/img/R351.png" style="width:60.0%" /></p>
<div id="asistente-de-instalación" class="section level2">
<h2>Asistente de instalación</h2>
<p>Durante el proceso de instalación la recomendación (para evitar posibles problemas) es seleccionar ventanas simples SDI en lugar de múltiples ventanas MDI (hay que utilizar <em>Opciones de configuración</em>).</p>
<p><img src="/img/asistente.png" style="width:70.0%" /></p>
<p>Una vez terminada la instalación, al abrir R aparece la ventana de la consola (simula una ventana de comandos de Unix) que permite ejecutar comandos de R.</p>
<p>Por defecto se instalan un conjunto de paquetes base de R (que se cargan automáticamente al iniciarlo) y un conjunto de <a href="https://cran.r-project.org/src/contrib/4.4.2/Recommended">paquetes recomendados</a> (que se pueden cargar empleando el comando <code>library()</code>),
pero hay disponibles miles de paquetes que cubren literalmente todos los campos del análisis de datos.
Ver por ejemplo:</p>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/index.html">CRAN: Packages</a></p></li>
<li><p><a href="https://cran.r-project.org/web/views">CRAN: Task Views</a></p></li>
</ul>
</div>
<div id="instalación-de-paquetes" class="section level2">
<h2>Instalación de paquetes</h2>
<p>Después de la instalación de R suele ser necesario instalar paquetes adicionales (puede ser recomendable <em>Ejecutar como administrador</em> R para evitar problemas de permiso de escritura en la carpeta <em>C:\Program Files\R\R-X.Y.Z\library</em>, o cambiar previamente los permisos de esta carpeta como se indica <a href="#library">aquí</a>).</p>
<p>El paquete que recomendaría instalar a un usuario que se está iniciando en R es<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> <a href="https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr"><code>Rcmdr</code></a> (un entorno gráfico), junto con sus dependencias (de esta forma cubriríamos las herramientas necesarias para los análisis más habituales con R).</p>
<p>Para ello bastaría con ejecutar en la consola de R (copiando y pegando p.e.) el comando:</p>
<pre class="r"><code>install.packages(&quot;Rcmdr&quot;, dependencies = TRUE)</code></pre>
<p>(puede que haya que seleccionar el repositorio de descarga, e.g. <em>Spain (Madrid)</em>).</p>
<p>La forma tradicional es esta:</p>
<ol style="list-style-type: decimal">
<li><p>Se inicia R y se selecciona <em>Paquetes &gt; Instalar paquetes</em></p></li>
<li><p>Se selecciona el repositorio.</p></li>
<li><p>Se selecciona el paquete y automáticamente se instala.</p></li>
</ol>
<p>El problema con esta forma es que no se instalan todos los paquetes de los que dependen (el <code>Rcmdr</code> lo hace automáticamente al iniciarlo por primera vez con el comando <code>library(Rcmdr)</code>).</p>
<p>En el caso de un usuario más avanzado, puede ser recomendable preparar un listado de todos los paquetes que se requieren y ejecutar un código de la forma:</p>
<pre class="r"><code>pkgs &lt;- c(&quot;Rcmdr&quot;, &quot;caret&quot;, &quot;tidymodels&quot;, &quot;tidyverse&quot;, &quot;remotes&quot;, &quot;devtools&quot;,
          &quot;sf&quot;, &quot;gstat&quot;, &quot;geoR&quot;, &quot;quadprog&quot;, &quot;DEoptim&quot;, &quot;spam&quot;, &quot;openxlsx&quot;,
	        &quot;knitr&quot;, &quot;bookdown&quot;, &quot;blogdown&quot;, &quot;pkgdown&quot;)
install.packages(setdiff(pkgs, installed.packages()[,&quot;Package&quot;]), dependencies = TRUE)</code></pre>
<p>El código anterior no reinstala los paquetes ya instalados, por lo que podrían aparecer problemas debidos a incompatibilidades entre versiones (aunque no suele ocurrir, salvo que nuestra instalación de R esté muy desactualizada).
Si es el caso, en lugar de la última línea se puede ejecutar:</p>
<pre class="r"><code>install.packages(pkgs, dependencies = TRUE) # Instala todos...</code></pre>
<p>Listados de paquetes recomendables:</p>
<ul>
<li><p><a href="https://support.rstudio.com/hc/en-us/articles/201057987">RStudio: Quick list of useful R packages</a></p></li>
<li><p><a href="https://www.computerworld.com/article/2921176">Great R packages for data import, wrangling and visualization</a></p></li>
</ul>
<p>NOTA: Yo prefiero instalar nuevas versiones de R siguiendo los pasos anteriores, pero otra alternativa es emplear <code>installr::updateR()</code>.</p>
</div>
<div id="ide" class="section level2">
<h2>Instalación (opcional) de un entorno de desarrollo o un editor de comandos</h2>
<p>Aunque la consola de R dispone de un editor básico de código (script), puede ser recomendable trabajar con un editor de comandos más cómodo y flexible.</p>
<p>Un entorno de desarrollo (integrated development environment, IDE) muy recomendable es <a href="https://posit.co/products/open-source/rstudio">RStudio</a>, que se puede instalar siguiendo los pasos en <a href="/post/instalacion-de-rstudio">este post</a>.</p>
<p>Otras alternativas son:</p>
<ul>
<li><p><a href="https://positron.posit.co">Positron: A next-generation data science IDE built by Posit</a> (versión beta para pruebas)</p></li>
<li><p><a href="https://sourceforge.net/projects/tinn-r">Tinn-R: GUI for R Language and Environment</a></p></li>
<li><p><a href="https://sourceforge.net/projects/npptor">NppToR: R in Notepad++</a> (requiere <a href="https://notepad-plus-plus.org/download">Notepad++</a>)</p></li>
<li><p><a href="https://www.gnu.org/software/emacs">Emacs</a> con <a href="https://stat.ethz.ch/ESS">ESS: Emacs Speaks Statistics)</a></p></li>
<li><p><a href="http://www.eclipse.org">Eclipse</a></p></li>
<li><p><a href="https://docs.microsoft.com/en-us/visualstudio/rtvs/?view=vs-2017">Microsoft Visual Studio</a></p></li>
</ul>
</div>
<div id="configuración-avanzada-opcional" class="section level2">
<h2>Configuración avanzada (opcional)</h2>
<div id="library" class="section level3">
<h3>Cambiar los permisos de la carpeta <em>library</em></h3>
<p>Para evitar problemas con la instalación de paquetes en Windows (y evitar también que los paquetes se instalen en <em>Documentos\R\win-library\X.Y</em>) yo acostumbro a dar permiso de <em>control total</em> a los usuarios del equipo en el subdirectorio <em>library</em> de la instalación de R.
Para ello, pulsar con el botón derecho en esta carpeta (e.g. <em>C:\Program Files\R\R-4.4.2\library</em>), seleccionar <em>Propiedades &gt; Seguridad &gt; Editar</em>, seleccionar los <em>Usuarios</em> del equipo, marcar <em>Control total</em> y <em>Aplicar</em>.</p>
<table>
<tbody>
<tr class="odd">
<td align="center"><img src="/img/propiedades.png" /></td>
<td align="center"><img src="/img/permisos.png" /></td>
</tr>
</tbody>
</table>
</div>
<div id="rtools" class="section level3">
<h3>Instalación de herramientas (incluyendo Rtools) y configuración de la ruta de búsqueda</h3>
<p>Para instalar paquetes a partir del código en Windows (y por tanto para desarrollar nuevos paquetes) puede ser necesario instalar <a href="https://cran.r-project.org/bin/windows/Rtools">Rtools</a> (si el paquete contiene código en C, C++ o Fortran, algo bastante habitual).
Es importante instalar la versión correspondiente a la instalación de R.</p>
<p>Al finalizar se puede añadir el directorio de instalación a la ruta de búsqueda (aunque solo sería necesario si se va a trabajar desde la ventana de comandos), y ya de paso recomiendo añadir también el directorio de instalación de R.
Para ello habría que ir a <em>Propiedades del sistema &gt; Opciones avanzadas &gt; Variables de entorno</em> y en <em>Variables de sistema</em> editar el <em>Path</em> y añadir dos nuevas entradas (o modificar versiones anteriores):
<em>C:\rtools44\usr\bin</em> y <em>C:\Program Files\R\R-4.4.2\bin</em> (o los correspondientes directorios de instalación).</p>
<p>Si no sabes como acceder a <em>Propiedades del sistema</em> (en Windows 10 y 11 está bastante oculto) puedes buscar <em>Configuración avanzada del sistema</em> en el botón de Inicio.
Otra opción es pulsar con el botón derecho en <em>Este equipo</em>, seleccionar <em>Propiedades</em> y después <em>Configuración avanzada del sistema</em>.</p>
<p><img src="/img/cmd.png" style="width:60.0%" /></p>
<p>Adicionalmente, si se instaló RStudio, como también instala <a href="https://pandoc.org">pandoc</a>, se puede añadir<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> <em>C:\Program Files\RStudio\bin\quarto\bin\tools</em> al <em>Path</em> (de esta forma podremos convertir fácilmente contenido escrito en otros formatos a Markdown, ver <a href="https://rubenfcasal.github.io/bookdown_intro/pandoc.html">enlace</a>).
Al finalizar, habrá que reiniciar el equipo para que los cambios surjan efecto.</p>
<p>Si se quieren instalar paquetes de repositorios distintos de CRAN (GitHub, GitLab, Bitbucket, …), puede ser recomendable instalar <a href="https://remotes.r-lib.org/"><code>remotes</code></a>.</p>
<p>Para el desarrollo de paquetes es recomendable instalar <a href="https://devtools.r-lib.org"><code>devtools</code></a>.
Para más detalles ver:</p>
<ul>
<li>R packages by Hadley Wickham and Jenny Bryan
(<a href="http://r-pkgs.had.co.nz/">online</a>,
<a href="http://shop.oreilly.com/product/0636920034421.do">O’Reilly</a>)</li>
</ul>
<p>Para generar animaciones en rmarkdown recomiendo emplear <a href="https://www.ffmpeg.org">ffmpeg</a> e instalar la versión compilada para Windows de BtbN: <a href="https://github.com/BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-master-latest-win64-lgpl-shared.zip">ffmpeg-master-latest-win64-lgpl-shared.zip</a>.
Que solo habría que descomprimir y añadir al path el subdirectorio <em>bin</em> (yo acostumbro a descomprimirlo en el subdirectorio <em>ffmpeg</em> de <em>C:\util</em> y añado una entrada de la forma <em>C:\util\ffmpeg\bin</em>).
Una vez instalado podemos generar una animación, que combine automáticamente las imágenes generadas en un bloque (chunk) de código, estableciendo las opciones: <code>fig.show="animate"</code> y <code>ffmpeg.format="gif"</code> (adicionalmente podemos establecer otras opciones como <code>aniopts="loop"</code> o <code>interval=0.5</code>; para más detalles ver <a href="https://yihui.org/knitr/options/#animation">chunk options</a>).</p>
<!-- 
Pendiente:
Compresión ficheros .RData
-->
<hr />
</div>
</div>
</div>
<div id="ubuntu" class="section level1">
<h1>Instalación de R en Ubuntu/Devian</h1>
<p>[Testado con Ubuntu 20.04.3 LTS y R 4.1.2, sin actualizar]</p>
<p>Instalar dependencias:</p>
<pre class="sh"><code>sudo apt install libcurl4-gnutls-dev libgit2-dev libxml2-dev libssl-dev </code></pre>
<p>Si aparecen problemas asegurarse de que los repositorios <em>universe</em> y <em>multiverse</em> están disponibles:</p>
<pre class="sh"><code>sudo add-apt-repository universe
sudo add-apt-repository multiverse
sudo apt update</code></pre>
<p>Se puede instalar R desde estos repositorios, pero normalmente no será la versión más actualizada y no lo recomendaría.</p>
<div id="instalación-de-r-desde-cran" class="section level2">
<h2>Instalación de R desde <a href="https://cran.r-project.org/bin/linux/ubuntu">CRAN</a></h2>
<p>Añadir la llave de firma GPG, añadir el repositorio CRAN a la lista de fuentes (para ver la versión de ubuntu se puede ejecutar <code>lsb_release -a</code>, el siguiente código ya la obtiene directamente) e instalar R:</p>
<pre class="sh"><code># Cambiar a root (alternativamente añadir `sudo` al principio de los comandos)
sudo -i
# update indices
apt update -qq
# install two helper packages we need
apt install --no-install-recommends software-properties-common dirmngr
# add the signing key (by Michael Rutter) for these repos
# To verify key, run gpg --show-keys /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc 
# Fingerprint: 298A3A825C0D65DFD57CBB651716619E084DAB9
wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
# add the R 4.0 repo from CRAN -- adjust &#39;focal&#39; to &#39;groovy&#39; or &#39;bionic&#39; as needed
add-apt-repository &quot;deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/&quot;
apt-get update
apt-get install r-base r-base-dev
logout</code></pre>
</div>
<div id="instalación-de-devtools-y-demás-paquetes" class="section level2">
<h2>Instalación de devtools y demás paquetes</h2>
<p>Ejecutar R en modo administrador para que los paquetes que se instalen estén disponibles para todos los usuarios</p>
<pre class="sh"><code>sudo -i R</code></pre>
<p>Ejecutar en la consola de R</p>
<pre class="r"><code>install.packages(&#39;devtools&#39;, dependencies = TRUE)</code></pre>
<p>Si aparecen problemas mirar
<a href="http://stackoverflow.com/a/20924082">stackoverflow - Problems installing the devtools package</a></p>
</div>
<div id="ayuda-html" class="section level2">
<h2>Ayuda html</h2>
<p>Si queremos la ayuda html (en un entorno gráfico con un navegador web instalado):</p>
<pre class="sh"><code>echo &quot;options(help_type=&#39;html&#39;)&quot; | sudo tee -a /etc/R/Rprofile.site</code></pre>
</div>
<div id="actualizar-r" class="section level2">
<h2>Actualizar R</h2>
<pre class="sh"><code>sudo apt-get update
sudo apt-get upgrade</code></pre>
</div>
<div id="instalar-r-studio" class="section level2">
<h2>Instalar R-Studio</h2>
<p>Si se dispone de un entorno gráfico se pueden seguir los pasos en <a href="/post/instalacion-de-rstudio/#ubuntu">este post</a> para instalar R-Studio Desktop. En caso contrario puede ser recomendable instalar R-Studio Server como se describe en <a href="/post/instalacion-de-r-para-hpc/#rstudio-server">este post</a>.</p>
<hr />
</div>
</div>
<div id="macosx" class="section level1">
<h1>Instalación en Mac OS X</h1>
<p>Instalar R de <a href="http://cran.es.r‐project.org/bin/macosx" class="uri">http://cran.es.r‐project.org/bin/macosx</a> siguiendo los pasos habituales.</p>
<p>Para instalar R-Commander (<a href="https://www.john-fox.ca/RCommander/installation-notes.html" class="uri">https://www.john-fox.ca/RCommander/installation-notes.html</a>) es necesario disponer de las librerías gráficas X11, como a partir de OS X Lion ya no están instaladas por defecto en el sistema, hay que instalar las librerías Open Source XQuartz <a href="https://www.xquartz.org" class="uri">https://www.xquartz.org</a>.</p>
<p>Finalmente, para instalar <code>Rcmdr</code> ejecutar en la consola de R:</p>
<pre class="r"><code>install.packages(&quot;Rcmdr&quot;, dependencies = TRUE)</code></pre>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>Anteriormente también recomendaba instalar <a href="https://togaware.com/projects/rattle/"><code>rattle</code></a>, pero depende del paquete <code>RGtk2</code> (ya que implementa un entorno gráfico basado en GTK+) y
actualmente no está disponible en CRAN, aunque se podría usar empleando una <a href="https://hub.docker.com/r/kayon/rattle/">imagen Docker</a>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Para encontrar la ruta a pandoc se puede ejecutar <code>rmarkdown::find_pandoc()</code>.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
